!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("events"),require("@dking/ttplayer-utils")):"function"==typeof define&&define.amd?define(["events","@dking/ttplayer-utils"],i):(t=t||self).TTPlayerCore=i(t.events,t.DOMUtils)}(this,(function(t,i){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i;const e=600,s=300;class n{constructor(t){if(!t.root)throw new Error("root can't be empty");if("string"==typeof t.root){const i=document.querySelector(t.root);if(!i)throw new Error("root can't be empty");this.root=i}else this.root=t.root;this.width=t.width||e,this.height=t.height||s,"number"==typeof this.width&&(this.width=`${this.width}px`),"number"==typeof this.height&&(this.width=`${this.width}px`),Object.keys(t).forEach(i=>{"width"!==i&&"height"!==i&&"root"!==i&&(this[i]=t[i])})}}class r{constructor(e){this.plugins=[],this.pluginsMap={},this.pluginsCtor=r.pluginsCtor,this.event=new t.EventEmitter,this.options=new n(e),this.root=new i(this.options.root)}init(){this.installPlugins().render().ready()}ready(){return this.event.emit("ready"),this}render(){return this.renderContainer().renderPlugins(),this}renderContainer(){const{width:t,height:i}=this.options;return this.root.addClass("ttplayer--container").setStyles({width:t,height:i}).prependTo(this.options.root),this}renderPlugins(){this.plugins.forEach(t=>t.render&&t.render())}installPlugins(){return this.pluginsCtor.forEach(t=>{const i=new t(this);this.pluginsMap[t.pluginName]=i,this.plugins.push(i),i.init()}),this}unInstallPlugin(){return this}static use(t){return this.installedPluginsMap[t.pluginName]?this:(this.pluginsCtor.push(t),this)}}return r.pluginsCtor=[],r.installedPluginsMap={},r}));
